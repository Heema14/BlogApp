@model EditProfileViewModel

<style>
    #ProfilePicture {
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 50%;
    border: 2px solid #0d6efd; /* bootstrap primary color */
    cursor: pointer;
    transition: box-shadow 0.3s ease;
    }

    #ProfilePicture:hover {
    box-shadow: 0 0 15px #0d6efdaa;
    }
</style>


<div class="container mt-5">
    <div class="card shadow-lg rounded-4">
        <div class="card-header bg-primary text-white text-center py-3 rounded-top-4">
            <h3 class="mb-0">Edit Your Profile</h3>
        </div>
        <div class="card-body p-4">
            <form asp-action="EditProfile" enctype="multipart/form-data" method="post" novalidate>

                <div class="text-center mb-3 d-flex justify-content-center align-items-center flex-column">
                    <input asp-for="NewProfilePicture" type="file" id="profilePicInput" class="d-none" accept=".png,.jpg,.jpeg" />

                    <label for="profilePicInput">
                        @if (!string.IsNullOrEmpty(Model.ProfilePicturePath))
                        {
                            <img id="ProfilePicture" src="@Model.ProfilePicturePath"
                                 class="mb-3" width="200" height="200" />
                        }
                        else
                        {
                            <img id="ProfilePicture" src="~/images/uploadImgs/default-image.jpg"
                                 class="mb-3" width="200" height="200" />
                        }
                    </label>
                    <small class="text-muted">Click the image to upload your profile picture (max 2MB)</small>
                    <span asp-validation-for="NewProfilePicture" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Email" class="form-label"></label>
                    <input asp-for="Email" readonly class="form-control-plaintext border-bottom" />
                </div>

                <div class="mb-3">
                    <label asp-for="nameUser" class="form-label">Username</label>
                    <input asp-for="nameUser" class="form-control" placeholder="Enter username..." />
                    <span asp-validation-for="nameUser" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Major" class="form-label">Major</label>
                    <input asp-for="Major" class="form-control" placeholder="Enter your major..." />
                    <span asp-validation-for="Major" class="text-danger"></span>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<partial name="_ValidationScriptsPartial" />

<script>
    document.querySelector("#profilePicInput").onchange = function () {
        document.getElementById('ProfilePicture').src = window.URL.createObjectURL(this.files[0]);
    }
</script>
